(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{177:function(a,s,t){"use strict";t.r(s);var e=t(0),n=Object(e.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("div",{staticClass:"content"},[t("h1",{attrs:{id:"环境一致性规范-web前端"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#环境一致性规范-web前端","aria-hidden":"true"}},[a._v("#")]),a._v(" 环境一致性规范(web前端)")]),a._v(" "),t("h2",{attrs:{id:"_1-背景和意义"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-背景和意义","aria-hidden":"true"}},[a._v("#")]),a._v(" 1 背景和意义")]),a._v(" "),t("p",[a._v("根据对前端开发环境的调研，前端开发人员之间都存在开发环境不一致的现象，这可能导致开发产出的系统存在不可预估的兼容性问题，也无法保证开发、测试与生产之间环境的统一性，增加了上线的风险。")]),a._v(" "),t("p",[a._v("因此，我们需要统一前端开发环境，让开发规范化，保证不同开发人员有一致的开发环境，以减低风险，提升效率。")]),a._v(" "),t("h2",{attrs:{id:"_2-规范内容及解析"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-规范内容及解析","aria-hidden":"true"}},[a._v("#")]),a._v(" 2 规范内容及解析")]),a._v(" "),t("p",[a._v("通过会议规范讨论，为了防止出现开发环境与生产环境不一致的问题，现在规范如下：")]),a._v(" "),t("ul",[t("li",[a._v("package.json 中写固定版本号")]),a._v(" "),t("li",[a._v("node version 开发、测试、生产版本统一为 8.9.3")]),a._v(" "),t("li",[a._v("npm 开发、测试、生产版本统一为 5.5.1")]),a._v(" "),t("li",[a._v("npm 源统一用公司私库（http://npm.xxx.com）")]),a._v(" "),t("li",[a._v("必须提交 package-lock.json")]),a._v(" "),t("li",[a._v("上线的源码必须与测试源码 md5 值保持一致，以保证上线代码是测试过的")])]),a._v(" "),t("p",[a._v("下面我们分别细说：")]),a._v(" "),t("h3",{attrs:{id:"_2-1-package-json-中写固定版本号"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-package-json-中写固定版本号","aria-hidden":"true"}},[a._v("#")]),a._v(" 2.1 package.json 中写固定版本号")]),a._v(" "),t("p",[a._v("请在生产环境包配置 dependencies 里面的版本号中去掉 ~, ^ 等符号，确保安装的版本为指定的版本。\n举例：")]),a._v(" "),t("div",{staticClass:"language-json extra-class"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token property"}},[a._v('"dependencies"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[a._v('"axios"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"0.17.1"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[a._v('"vue"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"2.5.2"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[a._v('"vue-router"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"3.0.1"')]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n")])])]),t("p",[a._v("至于开发环境中的 devDependencies 版本号前面的 ~, ^ 则可保留，因为在生产中不需要被安装。但要注意devDependencies 中 vue-template-compiler 是用来编译 .vue 文件的，它的版本要与 dependencies 中的 vue 版本保持一致，而 vue 版本已经固定，所以这里的 vue-template-compiler 也必须得固定，要去掉 ~, ^。")]),a._v(" "),t("p",[a._v("这里要强调一点，在引入新的包或者插件的时候，需要通过项目负责人审核，另外还要明确以下两点：")]),a._v(" "),t("ul",[t("li",[a._v("如果引入的包用于生产，请在安装时加入 --save ，安装后注意在 package.json 的 dependencies 中该包的版本号之前去掉 ~, ^ 。")]),a._v(" "),t("li",[a._v("如果不是生产需要的包，请使用 --save-dev。")])]),a._v(" "),t("p",[a._v("举例：")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 生产需要用到的包")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" xxx --save\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 仅开发中需要用到的包")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" xxx --save-dev\n")])])]),t("h3",{attrs:{id:"_2-2-node-与-npm-开发、测试、生产统一"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-node-与-npm-开发、测试、生产统一","aria-hidden":"true"}},[a._v("#")]),a._v(" 2.2 node 与 npm 开发、测试、生产统一")]),a._v(" "),t("p",[a._v("我们规定统一所有项目：")]),a._v(" "),t("ul",[t("li",[a._v("node 版本：8.9.3")]),a._v(" "),t("li",[a._v("npm 版本：5.5.1")])]),a._v(" "),t("p",[a._v("请在 package.json 中指定如下：")]),a._v(" "),t("div",{staticClass:"language-json extra-class"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token property"}},[a._v('"engines"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[a._v('"node"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"8.9.3"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[a._v('"npm"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"5.5.1"')]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n")])])]),t("h3",{attrs:{id:"_2-3-必须提交-package-lock-json"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-必须提交-package-lock-json","aria-hidden":"true"}},[a._v("#")]),a._v(" 2.3 必须提交 package-lock.json")]),a._v(" "),t("p",[a._v("为了保证 npm install 时包的依赖能保证一致，我们需要锁定安装时包的版本号，并且需要上传到 git。")]),a._v(" "),t("h3",{attrs:{id:"_2-4-npm-源统一用公司私库"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-npm-源统一用公司私库","aria-hidden":"true"}},[a._v("#")]),a._v(" 2.4 npm 源统一用公司私库")]),a._v(" "),t("p",[a._v("为了保证下载源一致，请使用公司私有库：")]),a._v(" "),t("blockquote",[t("p",[a._v("http://npm.xxx.com")])]),a._v(" "),t("p",[a._v("使用方法：")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" config "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("set")]),a._v(" registry http://npm.xxx.com\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v("\n")])])]),t("h3",{attrs:{id:"_2-5-上线的源码必须与测试源码-md5-值保持一致，以保证上线代码是测试过的"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-5-上线的源码必须与测试源码-md5-值保持一致，以保证上线代码是测试过的","aria-hidden":"true"}},[a._v("#")]),a._v(" 2.5 上线的源码必须与测试源码 md5 值保持一致，以保证上线代码是测试过的")]),a._v(" "),t("p",[a._v("这一项请项目负责人跟进，确保使用一致的 md5，以保证为测试过的那份源码")])])}],!1,null,null,null);s.default=n.exports}}]);